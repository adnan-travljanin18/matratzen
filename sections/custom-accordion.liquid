
<link href="{{ 'custom-accordion.css' | asset_url }}" rel="stylesheet" type="text/css">
<section data-section-id="{{ section.id }}" class="section-accordion" id="{{ section.settings.heading | handleize }}">
    <div class="container accordion-margins">
        <div class="row">
            <div class="col-6">
                <div class="block-heading">
                    <h4 class="fw-medium lh-base letter-spacing mb-0">{{ section.settings.heading }}</h4>
                </div>
            </div>
            <div class="col-12">
                <div>
                    <div>
                        {% for block in section.blocks %}
                            {% if block.settings.title != blank and block.settings.answer != blank %}
                             <div class="accordion-button-hover row py-5">
                                <a href="#" class=" col-6 border-bottom border-gray-100 d-flex align-items-center pe-2 justify-content-between arrow-positioning" title="Open {{ block.settings.title | strip_html }}" rel="nofollow" aria-label="Open {{ block.settings.title | strip_html }}" role="button" aria-expanded="false" onclick="toggleContent(event, {{ forloop.index }})">
                                    <h6 class="font-size-lg lh-base fw-normal font-family-base letter-spacing mb-0">{{ block.settings.title }}</h6>
                                    <span class="icon-class icon-full-arrow-right d-block"></span>
                                </a>
                                <div class="col-6" id="content-text-{{ forloop.index }}" data-type="content" style="display: {% if forloop.first %} block {% else %} none {% endif %};">
                                    <div class="fw-light letter-spacing rpt-5 pt-4">{{ block.settings.answer }}</div>
                                </div> 
                            </div>
                            {% endif %}
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="container border-bottom border-gray-100 d-block"></div>
</section>

<script>
    // Function to set the initial active state
    function setInitialActiveState() {
        // Add 'active' class to the first anchor tag
        var firstAnchor = document.querySelector('.accordion-button-hover a');
        if (firstAnchor) {
            firstAnchor.classList.add('active');
        }
    }

    // Function to toggle content
    function toggleContent(event, index) {
        // Prevent the default anchor tag behavior (e.g., navigating to a new page)
        event.preventDefault();

        // Remove 'active' class from all anchor tags
        document.querySelectorAll('.accordion-button-hover a').forEach(function (element) {
            element.classList.remove('active');
        });

        // Add 'active' class to the clicked anchor tag
        event.currentTarget.classList.add('active');

        // Hide all content-text elements
        document.querySelectorAll('[data-type="content"]').forEach(function (element) {
            element.style.display = 'none';
        });

        // Show the selected content-text element
        var contentElement = document.getElementById('content-text-' + index);
        if (contentElement) {
            contentElement.style.display = 'block';
        }
    }

    // Set initial active state when the page loads
    document.addEventListener('DOMContentLoaded', setInitialActiveState);
</script>

<style>
    .arrow-positioning .icon-full-arrow-right {
        transition: transform 0.3s ease-in-out;
    }
    .arrow-positioning.active .icon-full-arrow-right {
        transform: rotate(45deg);
    }
</style>


{% schema %}
  {
    "name": "Custom Accordion",
    "class": "dynamic-faq-block",
    "settings": [
		{
            "type": "text",
            "id": "heading",
            "label": "Block Title",
            "default": "FAQ"
        }
	],
    "blocks": [
        {
            "type": "question",
            "name": "FAQ",
            "settings": [
                {
                    "type": "richtext",
                    "id": "title",
                    "label": "Question"
                },
                {
                    "type": "richtext",
                    "id": "answer",
                    "label": "Answer"
                }
            ]
        }
    ],
    "presets": [
        {
            "name": "Custom Accordion",
            "category": "Content"
        }
    ]
}
{% endschema %}

{% comment %} {% if section.settings.enable %}
    <section data-section-id="{{ section.id }}"  class="pb-11 section-faq" id="{{ section.settings.heading | handleize }}">
        <div class="container">
            <div class="row">
                <div class="col-12">
                    <div class="block-heading">
                        <h4 class="fw-medium lh-base letter-spacing mb-0">{{ section.settings.heading }}</h4>
                    </div>
                    <div data-faq-section>
                        <custom-accordion {{ block.shopify_attributes }} data-accordionType="single">
                            {% for block in section.blocks %}
                                {% if block.settings.accordion-details != blank %}
                                    <div>
                                        <div class="accordion__container border-bottom border-gray-100 py-5">
                                            <a class="accordion__toggle d-flex align-items-center pe-2 justify-content-between" href="#" title="Open {{ block.settings.title | strip_html }}" rel="nofollow" aria-label="Open {{ block.settings.title | strip_html }}" role="button" aria-expanded="false" aria-controls="faq-{{ section.settings.heading | handleize }}-{{ forloop.index }}">
                                                <h6 class="font-size-lg lh-base fw-normal font-family-base letter-spacing mb-0">{{ block.settings.accordion-details }}</h6>
                                                <span class="icon-arrow-down d-block"></span>
                                            </a>
                                        </div>
                                    </div>
                                {% endif %}
                            {% endfor %}
                        </custom-accordion>
                    </div>
                </div>
            </div>  
        </div>
    </section>
{% endif %}

<script>

</script>

{% schema %}
    {
      "name": "Custom accordion",
      "class": "dynamic-accordion-block",
      "settings": [
          {
              "type": "checkbox",
              "id": "enable",
              "label": "Enable?"
          },
          {
              "type": "text",
              "id": "heading",
              "label": "Block Title",
              "default": "About Hatmony A"
          }
      ],
      "blocks": [
          {
              "type": "text",
              "name": "Details",
              "settings": [
                  {
                      "type": "text",
                      "id": "accordion-details",
                      "label": "Accordion details"
                  }
              ]
          }
      ],
      "presets": [
          {
              "name": "Custom Accordion",
              "category": "Content"
          }
      ]
  }
  {% endschema %} {% endcomment %}